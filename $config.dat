;FOLD Variaveis PEVE

;FOLD ENUM PRODUTOS
    CONST INT ProdutoA=1
    CONST INT ProdutoB=2 
    CONST INT ProdutoC=3 
    CONST INT ProdutoD=4 
    CONST INT ProdutoE=5
    CONST INT ProdutoF=6
    CONST INT ProdutoG=7
    CONST INT ProdutoH=8
;ENDFOLD

;FOLD VARIAVEIS CLP
    ;{EsteiraAtiva} numero da esteira que está com a caixa
    ;{CLPNumCaixas} numero de caixas para o pick
    ;{CLPIndexacaoVH} TRUE-> Vertical / FALSE -> Horizontal
    INT  CLPNumCaixas    
    BOOL CLPIndexacaoVH  
;ENDFOLD

;FOLD SINAIS
    Signal SensorAltura $in[1]
    Signal SensorCaixa $in[2]
    ;RecuaCilindro
    Signal AbreGarra1 $out[11]
    Signal AbreGarra2 $out[12]
    Signal AbreGarra3 $out[13]
    Signal AbreGarra4 $out[14]
    Signal AbreGarra5 $out[15]
    Signal AbreGarra6 $out[16]
    ;AvancaCilindro
    Signal FechaGarra1 $out[21]
    Signal FechaGarra2 $out[22]
    Signal FechaGarra3 $out[23]
    Signal FechaGarra4 $out[24]
    Signal FechaGarra5 $out[25]
    Signal FechaGarra6 $out[26]
    ;CilindroRecuado
    Signal SensorGarraAberta1 $in[31]
    Signal SensorGarraAberta2 $in[32]
    Signal SensorGarraAberta3 $in[33]
    Signal SensorGarraAberta4 $in[34]
    Signal SensorGarraAberta5 $in[35]
    Signal SensorGarraAberta6 $in[36]
    ;CilindroAvancado
    Signal SensorGarraFechada1 $in[41]
    Signal SensorGarraFechada2 $in[42]
    Signal SensorGarraFechada3 $in[43]
    Signal SensorGarraFechada4 $in[44]
    Signal SensorGarraFechada5 $in[45]
    Signal SensorGarraFechada6 $in[46]
;ENDFOLD

;FOLD Principais variaveis
    INT PalletAtivo
    INT LayerAtivo
    INT PlaceLayerAtivo
    INT EsteiraAtiva
;ENDFOLD

;FOLD Variaveis de estado
    BOOL PegaOk=FALSE
    CONST BOOL OperarVazio=TRUE
    CONST INT ALTURATOPO=850
;ENDFOLD

;FOLD Esteira e Pick
    CONST E6POS DefaultPoint={X 20000,Y 0,Z 1100,A 180.000,B 0,C 180.000,S 2,T 43,E1 0.0,E2 0.0,E3 0.0,E4 0.0,E5 0.0,E6 0.0}
    CONST FRAME NULLFRAME = {x 0,Y 0,Z 0,A 0,B 0,C 0}
    
    FRAME OffsetEsteira1
    FRAME OffsetEsteira2
    
    FRAME BaseEsteira1
    FRAME BaseEsteira2
;ENDFOLD

;FOLD STRUC MatrizPontos
    ;CLP
    ;-> {IndexacaoVH} TRUE-> Vertical / FALSE -> Horizontal
    ;-> {NumCaixas} numero de caixas para o pick
    ;Configuracao de Pick
    ;-> {ConfGarraPick} Opcao de abertura da garra (1,2,3,4,5...)
    ;-> {PickOp} Opcao de pick na esteira (1,2,3,4,5...)
    ;-> {FechaGarraOp} Opcao de abertura da garra (1,2,3,4,5...)
    ;Configuracao de Place
    ;-> {AbreGarraOp} Opcao de abertura da garra (1,2,3,4,5...)
    ;-> {SkipGoHome} Quando TRUE indica que deve fazer outro place antes de ir para a posicao de pick
    ;-> {SkipSobeRelativo} Quando TRUE indica que nao deve subir relativo para cima depois do place
    ;Pontos de Place
    ;-> {XApp1Place} Primeiro ponto de aproximacao de place
    ;-> {XApp2Place} Segundo ponto de aproximacao de place
    ;-> {XPlace} Ponto de place
    
    BOOL IndexacaoVH
    BOOL SkipGoHome
    BOOL SkipSobeRelativo
    INT NumCaixas
    INT ConfGarraPick
    INT PickOp
    INT FechaGarraOp
    INT AbreGarraOp
    E6POS XApp1Place
    E6POS XApp2Place
    E6POS XPlace
    STRUC DefMatriz BOOL IndexacaoVH,SkipGoHome,SkipSobeRelativo,INT NumCaixas,ConfGarraPick,PickOp,FechaGarraOp,AbreGarraOp,E6POS XApp1Place,XApp2Place,XPlace
    ;---------- MatrizPontos[MaxMatrizI,MaxMatrizJ] ----------
    CONST INT MaxMatrizI=8
    CONST INT MaxMatrizJ=15  
    DECL GLOBAL DefMatriz MatrizPontos[8,15];[MaxMatrizI,MaxMatrizJ]
;ENDFOLD

;FOLD STRUC Receita
    INT PlacesCamada
    INT Camadas
    INT AlturaCaixa
    FRAME OffsetProduto
    E6POS Pick1Esteira1
    E6POS Pick1Esteira2
    E6POS Pick2Esteira1
    E6POS Pick2Esteira2
    STRUC DefStrReceita INT PlacesCamada, Camadas, AlturaCaixa, FRAME OffsetProduto, E6POS Pick1Esteira1, Pick1Esteira2, Pick2Esteira1, Pick2Esteira2
    ;---------- StrReceita[MaxReceitas] ----------
    CONST INT MaxReceitas=8
    CONST INT MaxCamadas=11
    DECL GLOBAL DefStrReceita StrReceita[8];[MaxReceitas]
    INT  StrReceitaLayer[8,11];[MaxReceitas,MaxCamadas]
;ENDFOLD

;FOLD STRUC Pallet
    BOOL Livre
    INT ReceitaAtivo
    INT PlaceAtivo
    INT CamadaAtiva
    FRAME BasePoint
    FRAME OffSetPallet
    E6POS Approch
    STRUC DefPallet INT ReceitaAtivo, BOOL Livre, INT PlaceAtivo, CamadaAtiva, FRAME BasePoint, FRAME OffSetPallet, E6POS Approch
    ;---------- StrPallet[MaxPallets] ----------
    CONST INT MaxPallets=5
    DECL GLOBAL DefPallet StrPallet[5];[MaxPallets]
;ENDFOLD

;ENDFOLD