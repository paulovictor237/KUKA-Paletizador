;FOLD Variaveis PEVE

;Principais variaveis
INT PalletAtivo
INT LayerAtivo
INT PlaceLayerAtivo

BOOL PegaOk=FALSE

CONST BOOL OperarVazio=TRUE
CONST INT ALTURATOPO=850

;FOLD Definir Variaveis de Pontos
    POS OffsetEsteira1
    POS OffsetEsteira2
    CONST E6POS DefaultPoint={X 1910.56702,Y 0.000272712467,Z 1053.18311,A 180.000,B 0.00635702303,C 180.000,S 2,T 43,E1 0.0,E2 0.0,E3 0.0,E4 0.0,E5 0.0,E6 0.0}
;ENDFOLD

;FOLD SINAIS
    Signal SensorAltura $in[1]
    Signal SensorCaixa $in[2]
    ;RecuaCilindro
    Signal AbreGarra1 $out[11]
    Signal AbreGarra2 $out[12]
    Signal AbreGarra3 $out[13]
    Signal AbreGarra4 $out[14]
    Signal AbreGarra5 $out[15]
    Signal AbreGarra6 $out[16]
    ;AvancaCilindro
    Signal FechaGarra1 $out[21]
    Signal FechaGarra2 $out[22]
    Signal FechaGarra3 $out[23]
    Signal FechaGarra4 $out[24]
    Signal FechaGarra5 $out[25]
    Signal FechaGarra6 $out[26]
    ;CilindroRecuado
    Signal SensorGarraAberta1 $in[31]
    Signal SensorGarraAberta2 $in[32]
    Signal SensorGarraAberta3 $in[33]
    Signal SensorGarraAberta4 $in[34]
    Signal SensorGarraAberta5 $in[35]
    Signal SensorGarraAberta6 $in[36]
    ;CilindroAvancado
    Signal SensorGarraFechada1 $in[41]
    Signal SensorGarraFechada2 $in[42]
    Signal SensorGarraFechada3 $in[43]
    Signal SensorGarraFechada4 $in[44]
    Signal SensorGarraFechada5 $in[45]
    Signal SensorGarraFechada6 $in[46]
;ENDFOLD

;FOLD STRUC MatrizPontos
    ;CLP
    ;-> {IndexacaoVH} TRUE-> Vertical / FALSE -> Horizontal
    ;-> {NumCaixas} numero de caixas para o pick
    ;Configuracao de Pick
    ;-> {ConfGarraPick} Opcao de abertura da garra (1,2,3,4,5...)
    ;-> {PickOp} Opcao de pick na esteira (1,2,3,4,5...)
    ;-> {FechaGarraOp} Opcao de abertura da garra (1,2,3,4,5...)
    ;Configuracao de Place
    ;-> {AbreGarraOp} Opcao de abertura da garra (1,2,3,4,5...)
    ;-> {SkipGoHome} Quando TRUE indica que deve fazer outro place antes de ir para a posicao de pick
    ;-> {SkipSobeRelativo} Quando TRUE indica que nao deve subir relativo para cima depois do place
    ;Pontos de Place
    ;-> {XApp1Place} Primeiro ponto de aproximacao de place
    ;-> {XApp2Place} Segundo ponto de aproximacao de place
    ;-> {XPlace} Ponto de place
    
    BOOL IndexacaoVH
    BOOL SkipGoHome
    BOOL SkipSobeRelativo
    INT NumCaixas
    INT ConfGarraPick
    INT PickOp
    INT FechaGarraOp
    INT AbreGarraOp
    E6POS XApp1Place
    E6POS XApp2Place
    E6POS XPlace
    STRUC DecMatriz BOOL IndexacaoVH,SkipGoHome,SkipSobeRelativo,INT NumCaixas,ConfGarraPick,PickOp,FechaGarraOp,AbreGarraOp,E6POS XApp1Place,XApp2Place,XPlace
    ;----------MatrizPontos[MOZAICOS,PONTOS]----------
    CONST INT MaxMatrizI=8
    CONST INT MaxMatrizJ=15  
    DECL GLOBAL DecMatriz MatrizPontos[8,15];
;ENDFOLD

;FOLD STRUC Receita
    INT PlacesCamada
    INT Camadas
    INT AlturaCaixa
    POS OffsetProduto
    E6POS Pick1Esteira1
    E6POS Pick1Esteira2
    E6POS Pick2Esteira1
    E6POS Pick2Esteira2
    STRUC DecStrReceita INT PlacesCamada, Camadas, AlturaCaixa, POS OffsetProduto, E6POS Pick1Esteira1, Pick1Esteira2, Pick2Esteira1, Pick2Esteira2
    ;----------DecStrReceita[RECEITAS,MaxCamadas]----------
    CONST INT MaxReceitas=8
    CONST INT MaxCamadas=11
    DECL GLOBAL DecStrReceita StrReceita[8];[MaxReceitas]
    INT  StrReceitaLayer[8,11];[MaxReceitas,MaxCamadas]
;ENDFOLD

;FOLD STRUC Pallet
    BOOL Livre
    INT ReceitaAtivo
    INT PlaceAtivo
    INT CamadaAtiva
    FRAME BasePoint
    POS OffSetPallet
    E6POS Approch
    STRUC Pallet INT ReceitaAtivo, BOOL Livre, INT PlaceAtivo, CamadaAtiva, FRAME BasePoint, POS OffSetPallet, E6POS Approch
    CONST INT MaxPallets=5
    DECL GLOBAL Pallet StrPallet[5]
;ENDFOLD

;FOLD VARIAVEIS CLP
    ;{EsteiraAtiva} numero da esteira que está com a caixa
    ;{CLPNumCaixas} numero de caixas para o pick
    ;{CLPIndexacaoVH} TRUE-> Vertical / FALSE -> Horizontal
    INT EsteiraAtiva=1
    INT  CLPNumCaixas    
    BOOL CLPIndexacaoVH  
    ;STRUC CLP CHAR Produto[15], INT TamPallet, Mosaico
    ;DECL GLOBAL CLP CLPFurukawa
;ENDFOLD


;ENDFOLD